# GPA重修规划系统 - 完整设计文档

## 一、系统概述

本系统旨在帮助学生智能分析课程成绩，推荐最具价值的重修课程，并提供交互式规划工具，让学生能够自主设定重修目标并实时查看预期效果。

### 核心价值
- 基于数据驱动的重修决策
- 个性化的目标设定与规划
- 实时的效果预测与风险评估
- 智能化的策略建议

## 二、重修选择规则体系

### 2.1 课程难度评估模型

#### 基于学分的难度系数
学分越高，课程内容越多，难度越大，重修达到高绩点的难度也相应增加：

| 学分范围 | 难度系数 | 课程类型 | 说明 |
|---------|---------|---------|------|
| 0-1学分 | 0.7 | 通识/选修课 | 内容相对简单，容易提升 |
| 2学分 | 0.85 | 专业基础课 | 中等难度，需要一定努力 |
| 3学分 | 1.0 | 专业核心课 | 标准难度，内容较多 |
| 4学分 | 1.2 | 专业进阶课 | 难度较高，需要大量时间 |
| 

#### 重修成功概率计算
```
成功概率 = 基础成功率 × (1 / 难度系数) × 历史表现因子 × 目标合理性因子

其中：
- 基础成功率 = 0.8（假设学生认真准备）
- 历史表现因子 = (4.0 - 原始绩点) / 4.0
- 目标合理性因子 = 根据目标绩点与原始绩点差距确定
  * 差距 ≤ 1.0：因子 = 1.0
  * 差距 1.0-1.5：因子 = 0.8
  * 差距 1.5-2.0：因子 = 0.6
  * 差距 > 2.0：因子 = 0.4
```

### 2.2 重修价值评分算法

#### 综合评分模型
每门课程的重修价值通过三个维度综合评估：

```
重修价值分 = (提升潜力分 × 0.4) + (影响权重分 × 0.3) + (努力回报比 × 0.3)
```

**各项指标计算方法：**

1. **提升潜力分**
   - 计算逻辑：(4.0 - 当前绩点) × 学分 / 难度系数
   - 含义：考虑最大可能提升空间和实现难度

2. **影响权重分**
   - 计算逻辑：(学分 / 总学分) × 100
   - 含义：该课程对总GPA的影响程度

3. **努力回报比**
   - 计算逻辑：预期GPA提升值 / (难度系数 × 学分)
   - 含义：单位努力能获得的GPA提升

### 2.3 多层次优先级规则

#### 优先级分层体系

**第一优先级 - 必须重修（红色标记）**
- 条件：绩点 < 2.0 且 学分 ≥ 4
- 理由：这些课程严重拉低总GPA，不重修将影响毕业和深造
- 标签：【紧急】

**第二优先级 - 强烈建议（橙色标记）**
- 条件：2.0 ≤ 绩点 < 2.5 且 学分 ≥ 3
- 理由：性价比最高的重修选择，提升空间大且相对容易实现
- 标签：【推荐】

**第三优先级 - 建议考虑（黄色标记）**
- 条件：2.5 ≤ 绩点 < 3.0 且 学分 ≥ 3
- 理由：适合追求更高GPA的学生，需要权衡投入产出比
- 标签：【可选】

**第四优先级 - 酌情选择（绿色标记）**
- 条件：3.0 ≤ 绩点 < 3.3 的任何课程
- 理由：仅在追求极高GPA（3.8+）或该课程为专业核心课时考虑
- 标签：【备选】

**不建议重修（灰色标记）**
- 绩点 ≥ 3.5 的课程（提升空间极小）
- 1学分课程（对总GPA影响微乎其微）
- 已重修过一次的课程（部分学校限制）

### 2.4 智能推荐策略

根据学生的目标GPA提升幅度，系统提供三种推荐策略：

#### 保守策略（稳健提升）
- **适用场景**：目标提升0.1-0.2个绩点
- **推荐数量**：1-2门课程
- **选课原则**：
  - 优先选择最低绩点的高学分课程
  - 确保80%以上的成功率
  - 预计总学习时间：60-100小时

#### 平衡策略（标准提升）
- **适用场景**：目标提升0.2-0.4个绩点
- **推荐数量**：3-4门课程
- **选课原则**：
  - 2门低绩点高学分课程（核心提升）
  - 1-2门中等绩点中等学分课程（辅助提升）
  - 综合成功率保持在70%以上
  - 预计总学习时间：150-200小时

#### 激进策略（全力冲刺）
- **适用场景**：目标提升0.4个绩点以上
- **推荐数量**：5-6门课程
- **选课原则**：
  - 所有低于（目标GPA - 0.3）的课程
  - 不考虑难度系数，追求最大提升
  - 需要评估时间和精力是否充足
  - 预计总学习时间：250小时以上

## 三、交互式重修规划功能

### 3.1 用户自定义目标绩点

#### 设计原则
- 简化用户选择，避免决策困难
- 提供合理的目标选项，确保可实现性
- 实时反馈选择结果

#### 目标绩点选项设置
每门已选择的重修课程，用户可从以下四个选项中选择目标绩点：

| 选项 | 目标绩点 | 等级描述 | 适用说明 |
|------|---------|---------|----------|
| A | 4.0 | 优秀 | 完全掌握，追求满分 |
| A- | 3.7 | 良好 | 扎实掌握，留有余地 |
| B+ | 3.3 | 中上 | 明显改善，相对稳妥 |
| B | 3.0 | 及格优 | 基础改善，容易达成 |

#### 智能默认值设定
系统根据原始绩点自动推荐默认目标：
- 原始绩点 < 2.0 → 默认目标 3.0
- 原始绩点 2.0-2.5 → 默认目标 3.3
- 原始绩点 2.5-3.0 → 默认目标 3.7
- 原始绩点 > 3.0 → 默认目标 3.7

### 3.2 实时GPA计算引擎

#### 核心计算逻辑

**单科重修影响计算：**
```
单科GPA贡献 = (新绩点 - 原绩点) × 课程学分 / 总学分
```

**累计GPA计算：**
```
新总GPA = 原总GPA + Σ(各科GPA贡献)
```

**计算流程：**
1. 获取用户选择的重修课程列表
2. 读取每门课程的目标绩点设置
3. 计算每门课程的GPA贡献值
4. 累加得出最终GPA
5. 评估达成概率和风险等级

#### 实时更新机制
- 用户每次调整目标绩点，立即触发重算
- 显示变化动画，直观展示影响
- 高亮显示关键数值变化

### 3.3 数据可视化展示

#### 仪表盘设计

**1. GPA提升路径图**
- 横轴：重修课程进度
- 纵轴：GPA数值（2.0-4.0）
- 展示内容：
  - 起点：当前GPA
  - 节点：每门课程重修后的累计GPA
  - 终点：最终预期GPA
  - 目标线：用户设定的目标GPA

**2. 课程影响力矩阵**
```
展示格式：
┌─────────────┬────────┬────────┬────────┐
│ 课程名称    │ 当前→目标 │ GPA贡献 │ 影响度 │
├─────────────┼────────┼────────┼────────┤
│ 微观经济学  │ 2.3→3.7 │ +0.047 │ ████   │
│ 统计学      │ 2.7→3.3 │ +0.015 │ ██     │
│ 金融市场    │ 2.5→3.0 │ +0.013 │ ██     │
└─────────────┴────────┴────────┴────────┘
```

**3. 成功概率评估表**
- 整体成功率：加权平均值
- 分项展示：每门课程的成功概率
- 风险等级：低风险(>80%)、中风险(60-80%)、高风险(<60%)

### 3.4 场景模拟分析

#### 四种场景预测

**最佳情况（所有目标达成）**
- 假设：所有课程都达到设定的目标绩点
- 显示：最高可能达到的GPA
- 概率：基于各科成功率的联合概率

**期望情况（概率加权）**
- 假设：根据成功概率加权计算
- 计算：目标绩点 × 成功率 + 原绩点 × (1-成功率)
- 显示：最可能的GPA结果

**保守情况（部分达成）**
- 假设：高难度课程仅提升一个等级
- 调整规则：
  - 4.0目标 → 实际3.3
  - 3.7目标 → 实际3.0
  - 3.3目标 → 实际3.0
  - 3.0目标 → 保持3.0
- 显示：较为稳妥的GPA预期

**最差情况（维持现状）**
- 假设：所有课程维持原绩点
- 显示：如果重修失败的GPA（即当前GPA）
- 用途：风险底线评估

### 3.5 智能建议系统

#### 个性化建议生成

**1. 目标合理性评估**
```
当检测到不合理目标时：
- "您为[微观经济学]设定的目标4.0与原成绩2.3差距较大，建议调整为3.3或3.7"
- "选择6门课程同时重修风险较高，建议分两个学期进行，每学期3门"
```

**2. 优化方案推荐**
```
基于数据分析：
- "将[统计学]的目标从4.0调为3.7，成功率可从65%提升至85%"
- "当前方案预期提升0.35，再选择[投资学]可达到您0.4的目标"
- "移除[1学分选修课]，专注于[4学分核心课]，效率提升40%"
```

**3. 时间规划建议**
```
学习时间估算：
- 每提升0.3绩点：约25-35小时
- 每提升0.7绩点：约60-80小时
- 高学分课程额外增加30%时间
- 建议："预计需要180小时，建议每周投入15小时，约3个月完成"
```

**4. 风险预警提示**
```
风险等级划分：
- 低风险：绿色提示，"方案合理，预期成功率高"
- 中风险：黄色提示，"建议适当调低1-2门课程目标"
- 高风险：红色提示，"目标过于激进，强烈建议重新规划"
```

## 四、系统输出规范

### 4.1 重修方案报告格式

```
╔════════════════════════════════════════════╗
║           GPA 重修规划分析报告              ║
╚════════════════════════════════════════════╝

【当前状态】
• 当前GPA：3.12 / 4.00
• 已修学分：120
• 目标GPA：3.50
• 需要提升：0.38

【推荐重修方案】
┌──────────────┬────┬──────┬──────┬──────┬──────┬──────┐
│ 课程名称     │学分│ 当前 │ 目标 │ 提升 │成功率│ 优先级│
├──────────────┼────┼──────┼──────┼──────┼──────┼──────┤
│ 微观经济学   │ 4  │ 2.3  │ 3.7  │ +1.4 │ 72% │ ★★★  │
│ 统计学原理   │ 3  │ 2.7  │ 3.3  │ +0.6 │ 85% │ ★★   │
│ 金融市场学   │ 3  │ 2.5  │ 3.0  │ +0.5 │ 90% │ ★★   │
│ 公司理财     │ 4  │ 2.8  │ 3.3  │ +0.5 │ 80% │ ★    │
└──────────────┴────┴──────┴──────┴──────┴──────┴──────┘

【预期效果分析】
场景模拟：
• 最佳情况：GPA 3.51 (所有目标达成)
• 期望情况：GPA 3.44 (概率加权结果)
• 保守情况：GPA 3.38 (部分达成目标)
• 最差情况：GPA 3.12 (维持现状)

综合评估：
• 方案成功率：78%
• 风险等级：中低风险
• 预计学习时间：165-195小时
• 建议执行周期：一个学期

【执行建议】
1. 优先重修[微观经济学]，该课程对GPA提升贡献最大
2. [统计学原理]和[金融市场学]可同时进行，难度适中
3. [公司理财]可根据前三门的完成情况决定是否重修
4. 建议每周投入15-20小时用于重修课程学习

【风险提示】
⚠ 微观经济学目标3.7略高，可考虑调整为3.3以提高成功率
ℹ 如时间有限，可暂缓[公司理财]的重修，专注前三门
```

### 4.2 交互界面反馈信息

**实时提示信息格式：**
- ✅ 成功："重修方案已更新，预期GPA：3.44"
- ⚠️ 警告："当前选择7门课程，建议不超过5门"
- ❌ 错误："目标GPA 3.8超出可达范围（最高3.65）"
- ℹ️ 信息："调整[统计学]目标后，成功率提升15%"

## 五、实施要点总结

### 5.1 核心设计原则
1. **简化决策**：目标绩点仅提供4个选项，避免选择困难
2. **实时反馈**：每次调整立即显示效果，增强交互体验
3. **风险可控**：多场景模拟，让用户充分了解可能结果
4. **个性定制**：允许用户根据自身情况调整每门课程目标

### 5.2 技术实现要点
1. **数据结构**：使用JSON格式存储课程和重修计划数据
2. **计算精度**：GPA计算保留3位小数，百分比保留整数
3. **更新机制**：采用响应式设计，状态变化自动触发重算
4. **缓存策略**：缓存计算结果，相同输入不重复计算

### 5.3 用户体验优化
1. **视觉引导**：用颜色、图标区分优先级和风险等级
2. **操作简化**：支持批量选择、一键重置等快捷操作
4. **历史记录**：保存用户的规划历史，支持方案对比

